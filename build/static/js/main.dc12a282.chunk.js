(this.webpackJsonpLister=this.webpackJsonpLister||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/add.34280c59.svg"},function(e,t,a){e.exports=a.p+"static/media/hamburger.78aa51f7.svg"},function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(13),l=a.n(r),s=a(6),c=a(1);a(23);var i=function(){const e=Object(c.e)(),[t,a]=Object(n.useState)("Submit");function r(){a("Error in form!"),document.getElementById("submit-proxy").classList.add("error-styling")}function l(e){document.getElementById("form-container").classList.add("shrink-width");const t=document.getElementById("error-box");e.map(e=>{let a=document.createElement("div");a.textContent=e,t.appendChild(a)}),t.classList.add("visible")}function s(){document.getElementById("form-container").classList.remove("shrink-width");const e=document.getElementById("error-box");e.classList.remove("visible"),e.textContent=""}function i(){s(),a("Submit"),document.getElementById("submit-proxy").classList.remove("error-styling")}function m(e){const t=document.getElementById(e.target.name);""===e.target.value&&t.classList.toggle("focussedLabel")}return o.a.createElement("div",{className:"signup-container"},o.a.createElement("div",{className:"welcome-banner"},o.a.createElement("h1",null,"New to Lister?"),o.a.createElement("h2",null,"Signup to Lister for free and keep your lists synced, on all your devices, all the time.")),o.a.createElement("div",{className:"form-area"},o.a.createElement("form",{onSubmit:async function(t){t.preventDefault(),t.persist();const a=function(e){const t=e.target.password.value,a=e.target.passwordConfirmation.value;if(t===a&&t.length>=8)return!0;var n=[];return t!==a&&n.push("Passwords don't match!"),t.length<=8&&n.push("Minimum password length 8 characters!"),n}(t);if(!0===a){const a=t.target,n=new FormData(a);await fetch("http://localhost:3001/signup",{method:"POST",body:n}).then(e=>e.json()).then(t=>{t?e.push("/login"):(r(),l(["Username already in use, try something else!"]))})}else r(),s(),l(a)},name:"signup",className:"signup-form",autoComplete:"off"},o.a.createElement("div",{id:"form-container"},o.a.createElement("div",{className:"input-container"},o.a.createElement("label",{htmlFor:"username",id:"username"},"Username"),o.a.createElement("input",{type:"text",name:"username",onFocus:m,onBlur:m,onChange:i})),o.a.createElement("div",{className:"input-container"},o.a.createElement("label",{htmlFor:"password",id:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",onFocus:m,onBlur:m,onChange:i})),o.a.createElement("div",{className:"input-container"},o.a.createElement("label",{htmlFor:"passwordConfirmation",id:"passwordConfirmation"},"Confirm password"),o.a.createElement("input",{type:"password",name:"passwordConfirmation",onFocus:m,onBlur:m,onChange:i})),o.a.createElement("div",{id:"error-box"},"Error"),o.a.createElement("button",{name:"submit-button",id:"submit-button",hidden:!0}))),o.a.createElement("label",{id:"submit-proxy",htmlFor:"submit-button",className:"submit-proxy-button"},t)))};a(29);var m=function(e){let{setUser:t}=e;const a=Object(c.e)(),[r,l]=Object(n.useState)("Login");function s(){!function(){document.getElementById("form-container").classList.remove("shrink-width");const e=document.getElementById("error-box");e.classList.remove("visible"),e.textContent=""}(),l("Login"),document.getElementById("submit-proxy").classList.remove("error-styling")}function i(e){const t=document.getElementById(e.target.name);""===e.target.value&&t.classList.toggle("focussedLabel")}return o.a.createElement("div",{className:"login-container"},o.a.createElement("div",{className:"welcome-banner"},o.a.createElement("h1",null,"Welcome back!"),o.a.createElement("h2",null,"Login and keep your lists synced across all your devices.")),o.a.createElement("div",{className:"form-area"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault();const n=e.target,o=new FormData(n);fetch("http://localhost:3001/login",{method:"POST",body:o,credentials:"include"}).then(e=>e.json()).then(e=>{!1===e?(l("Problem logging in!"),document.getElementById("submit-proxy").classList.add("error-styling"),function(){document.getElementById("form-container").classList.add("shrink-width");const e=document.getElementById("error-box");let t=document.createElement("div");t.textContent="Problem with username or password, try retyping and logging in again.",e.appendChild(t),e.classList.add("visible")}()):(window.localStorage.setItem("listerToken",e.token.toString()),t(e.username),a.push("/"))})},name:"login",className:"login-form"},o.a.createElement("div",{id:"form-container"},o.a.createElement("div",{className:"input-container"},o.a.createElement("label",{htmlFor:"username",id:"username"},"Username"),o.a.createElement("input",{type:"text",name:"username",onFocus:i,onBlur:i,onChange:s})),o.a.createElement("div",{className:"input-container"},o.a.createElement("label",{htmlFor:"password",id:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",onFocus:i,onBlur:i,onChange:s})),o.a.createElement("div",{id:"error-box"},"Error"),o.a.createElement("button",{name:"submit-button",id:"submit-button",hidden:!0}))),o.a.createElement("label",{id:"submit-proxy",htmlFor:"submit-button",className:"submit-proxy-button"},r)))},u=a(15);const d=a.n(u)()({"remove-todo":!0,"float-right":!0});var g=e=>{let{id:t,task:a,completed:n,toggleCompleted:r,removeTodo:l}=e;return o.a.createElement("div",{className:"todo-item"},o.a.createElement("input",{type:"checkbox",value:n,checked:n,onChange:()=>r(t)}),o.a.createElement("span",{className:n?"completed-todo":null}," ",a),o.a.createElement("button",{type:"button",className:d,onClick:()=>l(t)},"Remove"))};var p=e=>{let{todos:t,toggleCompleted:a,removeTodo:n}=e;return o.a.createElement("div",{className:"todo-container"},t.map(e=>o.a.createElement(g,{key:e.id,toggleCompleted:a,removeTodo:n,id:e.id,task:e.task,completed:e.completed})))},h=a(16),E=a.n(h);var b=e=>{let{submitNewTodo:t}=e,[a,r]=Object(n.useState)("");return o.a.createElement("div",{className:"new-todo-form"},o.a.createElement("form",{onSubmit:e=>(e=>{e.preventDefault(),t(a),r("")})(e),autoComplete:"off"},o.a.createElement("label",null,o.a.createElement("input",{name:"task",value:a,placeholder:"E.g. Water the plants",onChange:e=>{r(e.target.value)},type:"text"})),o.a.createElement("button",{type:"submit"},o.a.createElement("img",{src:E.a,alt:"plus symbol icon"}))))};a(30);var v=function(e){let{user:t}=e;const a=[{id:0,task:"Write first todo (or list item!)",completed:!1}],[r,l]=Object(n.useState)(a);return Object(n.useEffect)(()=>{localStorage.getItem("listerToken")?fetch("http://localhost:3001/todos",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("listerToken"))}}).then(e=>e.json()).then(e=>{Array.isArray(e)&&(e[0]&&0!==e[0].id||e[1])&&l(e)}).catch(e=>{console.log(e)}):l(a)},[t]),Object(n.useEffect)(()=>{localStorage.getItem("listerToken")&&fetch("http://localhost:3001/todos",{method:"PUT",body:JSON.stringify({todos:r}),headers:{Authorization:"Bearer ".concat(localStorage.getItem("listerToken")),"Content-Type":"application/json"}}).catch(e=>{console.log(e)})},[r]),o.a.createElement("div",null,o.a.createElement(p,{todos:r,toggleCompleted:e=>{let t=r.map(t=>(t.id===e&&(t.completed=!t.completed),t));l(t)},removeTodo:e=>{l(r.filter(t=>t.id!==e))}}),o.a.createElement(b,{submitNewTodo:e=>{let t={id:(new Date).getTime(),task:e,completed:!1};l(e=>[...e,t])}}))};a(31);function f(e){document.getElementById("main-nav").classList.toggle("nav-popout")}function y(e){let{user:t,setUser:a}=e;return o.a.createElement("nav",{id:"main-nav"},o.a.createElement("div",{className:"nav-user"},t),o.a.createElement("div",{className:"nav-button",onClick:function(){fetch("http://localhost:3001/NaN",{credentials:"include"}).then(a(null)).then(window.localStorage.removeItem("listerToken"))}},"Logout"))}function w(){return o.a.createElement("nav",{id:"main-nav"},o.a.createElement(s.b,{to:"/login",exact:!0,activeClassName:"activeLink",className:"nav-button",onClick:f},"Login"),o.a.createElement(s.b,{to:"/signup",exact:!0,activeClassName:"activeLink",className:"nav-button",onClick:f},"Signup"),o.a.createElement(s.b,{to:"/",exact:!0,activeClassName:"activeLink",className:"nav-button",onClick:f},"Todos"))}a(32);var N=a(17),k=a.n(N);var C=function(){const[e,t]=Object(n.useState)(null);return Object(n.useEffect)(()=>{null===e&&localStorage.getItem("listerToken")&&fetch("http://localhost:3001/token-login",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("listerToken"))}}).then(e=>e.json()).then(e=>{t(e)}).catch(console.log("Error logging in with JWT"))},[]),o.a.createElement(s.a,null,o.a.createElement("header",{className:"main-header"},o.a.createElement("div",{className:"mobile-username"},function(){if(null!==e)return e.username}()),o.a.createElement(s.b,{to:"/",exact:!0,activeClassName:"activeLink",className:"logo"},"Lister"),o.a.createElement("div",{className:"hamburger-icon",onClick:function(e){document.getElementById("main-nav").classList.toggle("nav-popout")}},o.a.createElement("img",{src:k.a,alt:"Hamburger menu icon for navigation menu"})),e?o.a.createElement(y,{user:e,setUser:t}):o.a.createElement(w,null)),o.a.createElement("main",null,o.a.createElement(c.a,{exact:!0,path:"/signup",component:i}),o.a.createElement(c.a,{exact:!0,path:"/login",render:e=>o.a.createElement(m,Object.assign({},e,{isAuthed:!0,setUser:t}))}),o.a.createElement(c.a,{exact:!0,path:"/",render:t=>o.a.createElement(v,Object.assign({},t,{isAuthed:!0,user:e}))})))};l.a.render(o.a.createElement(C,null),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.dc12a282.chunk.js.map